Index: glibc-2.5/stdio-common/tstscanf.c
===================================================================
--- glibc-2.5.orig/stdio-common/tstscanf.c
+++ glibc-2.5/stdio-common/tstscanf.c
@@ -1,4 +1,4 @@
-/* Copyright (C) 1991,92,96,97,98,99,2000,2001 Free Software Foundation, Inc.
+/* Copyright (C) 1991,92,1996-2001,2007 Free Software Foundation, Inc.
    This file is part of the GNU C Library.
 
    The GNU C Library is free software; you can redistribute it and/or
@@ -272,7 +272,7 @@
     res = sscanf ("0x1234", "%lf", &d);
     printf ("res = %d, d = %f\n", res, d);
 
-    if (res != 0 || d != 123456.789)
+    if (res != 1 || d != 4660)
       {
 	fputs ("test failed!\n", stdout);
 	result = 1;
Index: glibc-2.5/stdio-common/vfscanf.c
===================================================================
--- glibc-2.5.orig/stdio-common/vfscanf.c
+++ glibc-2.5/stdio-common/vfscanf.c
@@ -1888,9 +1888,9 @@
 
 	  /* Have we read any character?  If we try to read a number
 	     in hexadecimal notation and we have read only the `0x'
-	     prefix or no exponent this is an error.  */
+  	     prefix this is an error.  */
 	  if (__builtin_expect (wpsize == 0
-				|| (is_hexa && (wpsize == 2 || ! got_e)), 0))
+				|| (is_hexa && wpsize == 2), 0))
 	    conv_error ();
 
 	scan_float:
